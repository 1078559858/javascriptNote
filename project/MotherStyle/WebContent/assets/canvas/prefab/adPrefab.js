
// -- user code here --

/* --- start generated code --- */

// Generated by  1.4.4 (Phaser v2.6.2)


/**
 * adPrefab.
 * @param {Phaser.Game} aGame A reference to the currently running game.
 * @param {Phaser.Group} aParent The parent Group (or other {@link DisplayObject}) that this group will be added to.    If undefined/unspecified the Group will be added to the {@link Phaser.Game#world Game World}; if null the Group will not be added to any parent.
 * @param {string} aName A name for this group. Not used internally but useful for debugging.
 * @param {boolean} aAddToStage If true this group will be added directly to the Game.Stage instead of Game.World.
 * @param {boolean} aEnableBody If true all Sprites created with {@link #create} or {@link #createMulitple} will have a physics body created on them. Change the body type with {@link #physicsBodyType}.
 * @param {number} aPhysicsBodyType The physics body type to use when physics bodies are automatically added. See {@link #physicsBodyType} for values.
 */
function adPrefab(aGame, aParent, aName, aAddToStage, aEnableBody, aPhysicsBodyType) {
	
	Phaser.Group.call(this, aGame, aParent, aName, aAddToStage, aEnableBody, aPhysicsBodyType);
	var _dragBg = this.game.add.sprite(0, 0, 'color', 'white.png', this);
	_dragBg.scale.setTo(2.0, 28.0);
	
	var _groupAll = this.game.add.group(this);
	
	var _football = this.game.add.sprite(0, -10, 'football', null, _groupAll);
	_football.scale.setTo(1.3, 1.5);
	
	var _football1 = this.game.add.sprite(0, 3660, 'football', null, _groupAll);
	_football1.scale.setTo(1.3, 1.5);
	
	var _football2 = this.game.add.sprite(0, 2440, 'football', null, _groupAll);
	_football2.scale.setTo(1.3, 1.5);
	
	var _football3 = this.game.add.sprite(0, 1220, 'football', null, _groupAll);
	_football3.scale.setTo(1.3, 1.5);
	
	var _btnBaidu = this.game.add.button(-22, 4438, 'qestion_question_bg', this.clickBaidu, this, null, null, null, null, _groupAll);
	_btnBaidu.scale.setTo(0.5, 0.5);
	
	this.game.add.text(56, 4489, '百度', {"font":"bold 40px Arial"}, _groupAll);
	
	var _btnGo = this.game.add.button(341, 4435, 'qestion_question_bg', this.clickGo, this, null, null, null, null, _groupAll);
	_btnGo.scale.setTo(0.5, 0.5);
	
	this.game.add.text(411, 4474, '继续测试', {"font":"bold 40px Arial"}, _groupAll);
	
	
	
	// public fields
	
	this.fDragBg = _dragBg;
	this.fGroupAll = _groupAll;
	this.fFootball = _football;
	this.fFootball1 = _football1;
	this.fFootball2 = _football2;
	this.fFootball3 = _football3;
	
}

/** @type Phaser.Group */
var adPrefab_proto = Object.create(Phaser.Group.prototype);
adPrefab.prototype = adPrefab_proto;
adPrefab.prototype.constructor = adPrefab;

/* --- end generated code --- */
// -- user code here --

adPrefab.prototype.initOnce = function () {
	this.setDrag(this.fDragBg);
};

adPrefab.prototype.onDragStart = function (sprite, pointer) {


	// sprite.x = sprite.x;
	// sprite.y = pointer.y;
};

adPrefab.prototype.clickBaidu = function () {
	window.location.href = "http://www.baidu.com";
};

adPrefab.prototype.clickGo = function () {
	this.game.add.tween(this).to({x:-800},500, Phaser.Easing.Linear.None, true);
};

adPrefab.prototype.onDragStop = function () {
	if(this.fDragBg.y > 0){
		this.game.add.tween(this.fDragBg).to({y:0},500, Phaser.Easing.Exponential.Out, true);
		this.game.add.tween(this.fGroupAll).to({y:0},500, Phaser.Easing.Exponential.Out, true);
	}

	if(this.fDragBg.y < -3560){
		this.game.add.tween(this.fDragBg).to({y:-3560},500, Phaser.Easing.Exponential.Out, true);
		this.game.add.tween(this.fGroupAll).to({y:-3560},500, Phaser.Easing.Exponential.Out, true);
	}
};

adPrefab.prototype.onDragUpdate = function () {
	if(this.fDragBg.y > 0){
		this.fGroupAll.y = this.fDragBg.y/6;
	}else if(this.fDragBg.y < -3560){
		this.fGroupAll.y = this.fDragBg.y - (this.fDragBg.y + 3560)/1.5;
	}else{
		this.fGroupAll.y = this.fDragBg.y;
	}

	console.log(this.fDragBg.y);
	console.log(this.fGroupAll.y);
};

adPrefab.prototype.setDrag = function (obj) {
	obj.inputEnabled = true;
	obj.input.enableDrag();
	obj.events.onDragStart.add(this.onDragStart, this);
	obj.events.onDragUpdate.add(this.onDragUpdate, this);
	obj.events.onDragStop.add(this.onDragStop, this);
	obj.input.allowHorizontalDrag = false;
};
